<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MonitorRabbitMQ - Interface Web</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/monitoramento.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 640'><path fill='%23007bff' d='M392.8 65.2C375.8 60.3 358.1 70.2 353.2 87.2L225.2 535.2C220.3 552.2 230.2 569.9 247.2 574.8C264.2 579.7 281.9 569.8 286.8 552.8L414.8 104.8C419.7 87.8 409.8 70.1 392.8 65.2zM457.4 201.3C444.9 213.8 444.9 234.1 457.4 246.6L530.8 320L457.4 393.4C444.9 405.9 444.9 426.2 457.4 438.7C469.9 451.2 490.2 451.2 502.7 438.7L598.7 342.7C611.2 330.2 611.2 309.9 598.7 297.4L502.7 201.4C490.2 188.9 469.9 188.9 457.4 201.4zM182.7 201.3C170.2 188.8 149.9 188.8 137.4 201.3L41.4 297.3C28.9 309.8 28.9 330.1 41.4 342.6L137.4 438.6C149.9 451.1 170.2 451.1 182.7 438.6C195.2 426.1 195.2 405.8 182.7 393.3L109.3 320L182.6 246.6C195.1 234.1 195.1 213.8 182.6 201.3z'/></svg>">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-server"></i> MonitorRabbitMQ v3.0.0</h1>
            <div class="status-bar">
                <div style="display:flex; align-items:center; gap:10px;">
                    <!-- espaço para indicadores (ex: bolinha de status) -->
                </div>
                <div class="progress-bar" style="margin-left:20px;">
                    <div id="progress-fill" class="progress-fill"></div>
                    <div id="status-text">Parado</div>
                </div>
            </div>
        </div>
        
        <div class="info-bar">
            <i class="fas fa-user"></i> {{ config.sso_username or 'N/A' }} | 
            <i class="fas fa-sync-alt"></i> {{ config.intervalo_minutos or 10 }}min | 
            <i class="fas fa-list"></i> {{ config.filas_monitoradas|length }} filas | 
            <i class="fas fa-globe"></i> {{ config.serviço_selecionado or 'N/A' }}
        </div>
        
        <div class="controls">
            <div class="buttons-main">
                <button id="btn-real" class="btn btn-success" onclick="iniciarMonitoramento('real')">
                    <i class="fas fa-play"></i> Monitoramento
                </button>
                
                <button id="btn-debug-terminal" class="btn btn-warning" onclick="alternarDebugTerminal()" title="Alterna logs no terminal (modo debug)">
                    <i class="fas fa-terminal"></i> Debug Terminal
                </button>
                
                <button id="btn-simulacao" class="btn btn-primary" onclick="testarAlertas()" title="Testa se os alertas estão funcionando">
                    <i class="fas fa-bell"></i> Teste Alertas
                </button>
                
                <button id="btn-encerrar" class="btn btn-danger" onclick="encerrarSistema()" title="Encerra o sistema completamente">
                    <i class="fas fa-skull-crossbones"></i> Encerrar Sistema
                </button>
            </div>
            
            <div class="buttons-config">
                <a href="/configuracao" class="btn btn-secondary" style="text-decoration: none;" title="Configurações">
                    <i class="fas fa-cog"></i>
                </a>
            </div>
        </div>
        
        <div class="logs-container">
            <div class="logs-header">
                <h3><i class="fas fa-file-alt"></i> Logs do Monitoramento</h3>
                <button class="btn btn-secondary" onclick="limparLogs()" style="padding: 8px 16px; font-size: 12px;">
                    <i class="fas fa-trash"></i> Limpar Logs
                </button>
            </div>
            
            <div id="logs-area" class="logs-area">
                <div class="log-entry sistema">Sistema iniciado - Aguardando comando...</div>
                <div class="log-entry config">Interface web carregada com sucesso</div>
                <div class="log-entry sistema">Escolha entre Monitoramento Real ou Modo Simulação</div>
            </div>
        </div>
        
        <div class="footer">
            Desenvolvido por André Weinfurter © 2025 - TOTVS<br>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='js/monitoramento.js') }}"></script>
</body>
</html>
